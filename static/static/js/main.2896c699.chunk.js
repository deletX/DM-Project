(this["webpackJsonpreact-fontend"]=this["webpackJsonpreact-fontend"]||[]).push([[0],{247:function(e,t,a){e.exports=a(380)},252:function(e,t,a){},253:function(e,t,a){},301:function(e,t){},303:function(e,t){},337:function(e,t){},338:function(e,t){},380:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(13),o=a.n(i),l=(a(252),a(253),a(235)),c=a(33),u=a(420),s=a(39),m=a(21),d=a.n(m),p="4mOLHPfJL0zueHOlawvJXsdnImpjOv3PmLdmm3NT",f="FW4dYuZsLmE6PQHk7qrPAc4shQhdx2hknqNOh58XO3JQ6PFI8um2z6wyJubxF6hKNOOOJfZUQ67jm5ApN5HJioq4XsNAGSbCLiQZqrqfo6jiy67ddpvMOl3Be8SATFSL",g="http://localhost:8000/api/v0.1/",E=function(){return g+"current-profile/"},h=function(){return g+"auth/token"},v=function(){return g+"signup/"},b=function(e){return"".concat(function(e){return g+"profiles/".concat(e,"/")}(e),"cars/")},O=function(){return"".concat(E(),"notifications/")},S=function(e,t){return{type:"ADD_ALERT",text:e,style:t}},w=function(e){return function(t){e.response?t(S(JSON.stringify(e.response.data),"error")):t(S(e.toString(),"error"))}},y=a(116),T=a(71),I=function(e,t){return Object(T.a)({},e,{},t)},N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=Object(T.a)({headers:Object(T.a)({"Content-type":e},a)},n);return null!=t&&(r=Object(T.a)({},r,{headers:Object(T.a)({},r.headers,{Authorization:"Bearer ".concat(t)})})),r},_=function(){return function(e){e({type:"PROFILE_OP_START"});var t=localStorage.getItem("access_token");return d.a.get(E(),N("application/json",t)).then((function(t){var a=t.data,n=a.id,r=a.user,i=a.picture,o=a.score,l=a.carSet,c=a.averageVote,u=a.receivedFeedback,s=a.givenFeedback;return localStorage.setItem("profile_id",n),e(function(e,t,a,n,r,i,o,l){return{type:"GET_PROFILE_SUCCESS",id:e,picture:a,score:n,carSet:r,averageVote:i,receivedFeedback:o,givenFeedback:l,user:t}}(n,r,i,o,l,c,u,s))})).catch((function(t){return e({type:"PROFILE_OP_ERROR"}),e(w(t)),t}))}},R=function(){return function(e){e({type:"NOTIFICATIONS_START"});var t=localStorage.getItem("access_token");return d.a.get(O(),N("application/json",t)).then((function(t){e({type:"GET_NOTIFICATIONS_SUCCESS",notifications:t.data})})).catch((function(t){return e(w(t)),e({type:"NOTIFICATIONS_ERROR"}),t}))}},j=function(e){return{type:"AUTH_SUCCESS",token:e}},k=function(e,t){return function(a){setTimeout((function(){a(C(t))}),1e3*e)}},C=function(e){return function(t){return d.a.post(h(),y.stringify({client_id:p,client_secret:f,grant_type:"refresh_token",refresh_token:e}),N("application/x-www-form-urlencoded")).then((function(e){var a=e.data.access_token,n=e.data.refresh_token,r=new Date((new Date).getTime()+36e5);localStorage.setItem("access_token",a),localStorage.setItem("refresh_token",n),localStorage.setItem("expiration_date",r),t(j(a)),t(_()),t(R()),t(k(3600))})).catch((function(e){return t({type:"AUTH_ERROR"}),t(w(e)),e}))}},x=function(e,t,a,n,r){return function(i){return i({type:"AUTH_START"}),d.a.post(v(),{username:e,first_name:t,last_name:a,email:n,password:r},N("application/json")).then((function(t){return i(function(e,t){return function(a){return a({type:"AUTH_START"}),d.a.post(h(),y.stringify({client_id:p,client_secret:f,grant_type:"password",username:e,password:t}),N("application/x-www-form-urlencoded")).then((function(e){var t=e.data.access_token,n=e.data.refresh_token,r=new Date((new Date).getTime()+36e5);return localStorage.setItem("access_token",t),localStorage.setItem("refresh_token",n),localStorage.setItem("expiration_date",r),a(j(t)),a(k(3600)),a(R()),a(_())})).catch((function(e){return a({type:"AUTH_ERROR"}),a(w(e)),e}))}}(e,r))})).catch((function(e){return i({type:"AUTH_ERROR"}),i(w(e)),e}))}},P=function(){return function(e){e((localStorage.clear(),{type:"AUTH_LOGOUT"})),e((function(e){return e({type:"CLEAR_PROFILE_DATA"})})),e((function(e){e({type:"CLEAR_NOTIFICATIONS"})}))}},A=a(422),L=a(384),F=a(142),U=Object(u.a)((function(e){return{root:{minWidth:"100vw",backgroundColor:F.white,alignItems:"center",flexDirection:"column",display:"flex"},formPaper:{flexDirection:"column",alignItems:"center",display:"flex",flexWrap:"wrap",margin:20,maxWidth:"55ch",minWidth:"10ch",backgroundColor:e.palette.background.paper},inline:{display:"inline"}}})),D=Object(s.b)((function(e){return{isAuthenticated:void 0!==e.auth.token}}),null)((function(e){var t=e.children,a=e.isAuthenticated;Object(n.useEffect)((function(){a&&at.push("/home")}));var i=U();return r.a.createElement(A.a,{className:i.root,maxWidth:"xs"},r.a.createElement(L.a,{className:i.formPaper},t))})),W=a(12),B=a(87),H=a(432),q=a(454),$=a(433),z=a(446),G=a(428),J=a(451),M=a(456),V=a(424),Z=a(429),Q=a(450),X=a(423),K=Object(u.a)((function(e){return{root:{marginBottom:e.spacing(2),width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%"},button:{marginRight:e.spacing(1),marginBottom:e.spacing(1)},imageInput:{display:"none"},imageProgress:{marginLeft:e.spacing(1)},imgPreview:{margin:10,maxWidth:"9ch",minWidth:"6ch",maxHeight:"9ch",minHeight:"6ch"}}})),Y=function(e){var t=e.firstName,a=e.setFirstName,i=e.lastName,o=e.setLastName,l=e.username,c=e.setUsername,u=e.usernameError,s=e.setUsernameError,m=e.password,d=e.setPassword,p=e.passwordError,f=e.setPasswordError,g=e.email,E=e.setEmail,h=e.emailError,v=e.setEmailError,b=e.image,O=e.setImage,S=e.imageURL,w=e.setImageURL,y=K(),T=Object(n.useState)(""),I=Object(W.a)(T,2),N=I[0],_=I[1],R=Object(n.useState)(""),j=Object(W.a)(R,2),k=j[0],C=j[1],x=Object(n.useState)(""),P=Object(W.a)(x,2),A=P[0],L=P[1],F=function(e){null===e.target.value||""===e.target.value?(v(!0),_("Email is required")):/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e.target.value)?(v(!1),_("")):(v(!0),_("Not a valid email")),E(e.target.value)},U=function(e){null===e.target.value||""===e.target.value?(s(!0),L("Username is required")):(s(!1),L("")),c(e.target.value)},D=function(e){null===e.target.value||""===e.target.value?(f(!0),C("Password is required")):/^[\w!@#$%^&*]{8,}$/.test(e.target.value)?/^(?=.*[\d])[\w!@#$%^&*]{8,}$/.test(e.target.value)?/^(?=.*[A-Z])(?=.*[\d])[\w!@#$%^&*]{8,}$/.test(e.target.value)?/^(?=.*[a-z])(?=.*[A-Z])(?=.*[\d])[\w!@#$%^&*]{8,}$/.test(e.target.value)?/^(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z])(?=.*[\d])[\w!@#$%^&*]{8,}$/.test(e.target.value)?(f(!1),C("")):(f(!0),C("Password should contain at least 1 special character")):(f(!0),C("Password should contain at least 1 lowercase")):(f(!0),C("Password should contain at least 1 capital")):(f(!0),C("Password should contain at least 1 number")):(f(!0),C("Password should be at least 8 character long")),d(e.target.value)};return r.a.createElement("div",{className:y.root},r.a.createElement(Q.a,{src:""!==S?S:"http://localhost:8000/media/default-profile.jpg",className:y.imgPreview}),r.a.createElement("form",{className:y.form},r.a.createElement(X.a,{container:!0,spacing:2},r.a.createElement(X.a,{item:!0,xs:12,sm:6},r.a.createElement(J.a,{variant:"outlined",fullWidth:!0,id:"name",label:"First Name",placeholder:"James",value:t,onChange:function(e){a(e.target.value)},autoComplete:"name"})),r.a.createElement(X.a,{item:!0,xs:12,sm:6},r.a.createElement(J.a,{variant:"outlined",fullWidth:!0,id:"surname",label:"Last Name",placeholder:"Bond",value:i,onChange:function(e){o(e.target.value)},autoComplete:"family-name"})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(J.a,{variant:"outlined",fullWidth:!0,required:!0,id:"username",label:"Username",value:l,placeholder:"jamesbond007",helperText:A,onChange:U,onBlur:U,error:u,autoComplete:"username"})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(J.a,{variant:"outlined",fullWidth:!0,required:!0,id:"email",label:"E-mail",placeholder:"jamesbond@mi6.co.uk",type:"email",error:h,helperText:N,onChange:F,onBlur:F,value:g,autoComplete:"email"})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(J.a,{variant:"outlined",fullWidth:!0,required:!0,id:"password",label:"Password",error:p,value:m,type:"password",helperText:k,onChange:D,onBlur:D,autoComplete:"new-password"})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(G.a,{fullWidth:!0,variant:"contained",color:"secondary",component:"label",justify:"flex-end",className:y.button,startIcon:r.a.createElement(M.a,null)},"Picture",r.a.createElement(V.a,{className:y.imageInput,type:"file",controlled:!0,onChange:function(e){O("loading");var t=new FileReader,a=e.target.files[0];t.onloadend=function(){w(t.result)},O(a),t.readAsDataURL(a)}}),"loading"===b?r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a,{size:"2ch",className:y.imageProgress})):r.a.createElement(r.a.Fragment,null))))))},ee=a(434),te=a(443),ae=a(430),ne=a(426),re=a(453),ie=a(431),oe=Object(u.a)((function(e){return{root:{marginBottom:e.spacing(2),width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%"},button:{marginRight:e.spacing(1),marginBottom:e.spacing(1)}}})),le=function(e){var t=e.name,a=e.setName,i=e.totSeats,o=e.setTotSeats,l=e.consumption,c=e.setConsumption,u=e.fuel,s=e.setFuel,m=oe(),d=Object(n.useState)(!1),p=Object(W.a)(d,2),f=p[0],g=p[1];return r.a.createElement("div",{className:m.root},r.a.createElement(ne.a,{variant:"outlined",className:m.form},r.a.createElement(X.a,{container:!0,spacing:2},r.a.createElement(X.a,{item:!0,xs:12,sm:6},r.a.createElement(J.a,{fullWidth:!0,id:"car-name",label:"Name",placeholder:"Fiat Uno 1992",value:t,onChange:function(e){var t=e.target.value;t.length>0?g(!1):g(!0),a(t)},onBlur:function(e){(e.target.value.length<0||""===e.target.value)&&g(!0)},error:f,required:!0,helperText:f?"Name is required":"",autoComplete:"name"})),r.a.createElement(X.a,{item:!0,xs:12,sm:6},r.a.createElement(ne.a,{variant:"outlined"},r.a.createElement(re.a,{id:"tot-seats-label"},"Seats"),r.a.createElement(te.a,{id:"tot-seats",label:"Seats",labelId:"tot-seats-label",value:i,onChange:function(e){o(e.target.value)}},r.a.createElement(ae.a,{value:2},"2"),r.a.createElement(ae.a,{value:3},"3"),r.a.createElement(ae.a,{value:4},"4"),r.a.createElement(ae.a,{value:5},"5"),r.a.createElement(ae.a,{value:6},"6"),r.a.createElement(ae.a,{value:7},"7"),r.a.createElement(ae.a,{value:8},"8"),r.a.createElement(ae.a,{value:9},"9")))),r.a.createElement(X.a,{item:!0,xs:12,sm:6},r.a.createElement(ne.a,{variant:"outlined"},r.a.createElement(re.a,{id:"fuel-label"},"Fuel"),r.a.createElement(te.a,{id:"fuel",labelId:"fuel-label",label:"Fuel",value:u,onChange:function(e){s(e.target.value)}},r.a.createElement(ae.a,{value:1},"Petrol"),r.a.createElement(ae.a,{value:2},"Diesel"),r.a.createElement(ae.a,{value:3},"Gas"),r.a.createElement(ae.a,{value:4},"Electric")))),r.a.createElement(X.a,{item:!0,xs:12,sm:6},r.a.createElement(J.a,{type:"number",helperText:"Between 5 and 25",step:.05,label:"Consumption",value:l,InputProps:{endAdornment:r.a.createElement(ie.a,{position:"end"},"l/100Km")},onChange:function(e){c(e.target.value)},onBlur:function(e){var t=e.target.value;t<5&&(e.target.value=5),t>20&&(e.target.value=20),c(e.target.value)}})))))},ce=Object(u.a)((function(e){return{root:{marginBottom:e.spacing(5),width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%"},button:{marginRight:e.spacing(1),marginBottom:e.spacing(1)},imageInput:{display:"none"},imageProgress:{marginLeft:e.spacing(1)},imgPreview:{margin:10,maxWidth:"9ch",minWidth:"6ch",maxHeight:"9ch",minHeight:"6ch"},instruction:{marginBottom:e.spacing(2)},carDivider:{width:"123%",marginTop:e.spacing(5),marginRight:"22px",marginBottom:e.spacing(5)}}})),ue=function(e){var t=e.firstName,a=e.lastName,n=e.username,i=e.password,o=e.email,l=e.imageURL,c=e.carName,u=e.totSeats,s=e.consumption,m=e.fuel,d=ce();return r.a.createElement("div",{className:d.root},r.a.createElement(B.a,{className:d.instruction},"Review you're data before submitting!"),r.a.createElement(Q.a,{src:""!==l?l:"http://localhost:8000/media/default-profile.jpg",className:d.imgPreview}),r.a.createElement(ne.a,{variant:"outlined",className:d.form},r.a.createElement(X.a,{container:!0,spacing:2},r.a.createElement(X.a,{item:!0,xs:12,sm:6},r.a.createElement(J.a,{fullWidth:!0,id:"name",label:"First Name",value:t,InputProps:{readOnly:!0}})),r.a.createElement(X.a,{item:!0,xs:12,sm:6},r.a.createElement(J.a,{fullWidth:!0,id:"surname",label:"Last Name",value:a,InputProps:{readOnly:!0}})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(J.a,{fullWidth:!0,id:"username",label:"Username",value:n,InputProps:{readOnly:!0}})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(J.a,{fullWidth:!0,id:"email",label:"E-mail",type:"email",value:o,InputProps:{readOnly:!0}})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(J.a,{fullWidth:!0,id:"password",label:"Password",value:i,type:"password",InputProps:{readOnly:!0}})))),""!==c&&r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{className:d.carDivider}),r.a.createElement(ne.a,{variant:"outlined",className:d.form},r.a.createElement(X.a,{container:!0,spacing:2},r.a.createElement(X.a,{item:!0,xs:12,sm:6},r.a.createElement(J.a,{fullWidth:!0,id:"car-name",label:"Name",value:c,InputProps:{readOnly:!0}})),r.a.createElement(X.a,{item:!0,xs:12,sm:6},r.a.createElement(ne.a,{variant:"outlined"},r.a.createElement(re.a,{id:"tot-seats-label"},"Seats"),r.a.createElement(te.a,{id:"tot-seats",label:"Seats",labelId:"tot-seats-label",value:u,inputProps:{readOnly:!0}},r.a.createElement(ae.a,{value:2},"2"),r.a.createElement(ae.a,{value:3},"3"),r.a.createElement(ae.a,{value:4},"4"),r.a.createElement(ae.a,{value:5},"5"),r.a.createElement(ae.a,{value:6},"6"),r.a.createElement(ae.a,{value:7},"7"),r.a.createElement(ae.a,{value:8},"8"),r.a.createElement(ae.a,{value:9},"9")))),r.a.createElement(X.a,{item:!0,xs:12,sm:6},r.a.createElement(ne.a,{variant:"outlined"},r.a.createElement(re.a,{id:"fuel-label"},"Fuel"),r.a.createElement(te.a,{id:"fuel",labelId:"fuel-label",label:"Fuel",value:m,inputProps:{readOnly:!0}},r.a.createElement(ae.a,{value:1},"Petrol"),r.a.createElement(ae.a,{value:2},"Diesel"),r.a.createElement(ae.a,{value:3},"Gas"),r.a.createElement(ae.a,{value:4},"Electric")))),r.a.createElement(X.a,{item:!0,xs:12,sm:6},r.a.createElement(J.a,{type:"number",step:.05,label:"Consumption",value:s,InputProps:{endAdornment:r.a.createElement(ie.a,{position:"end"},"l/100Km"),readOnly:!0}}))))))},se=a(447),me=a(455),de=Object(u.a)((function(e){return{title:{backgroundColor:e.palette.background.paper,padding:e.spacing(1)},button:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},root:{width:"95%",margin:10},loading:{marginBottom:e.spacing(5),width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},loadingTypography:{marginBottom:e.spacing(2)}}}));var pe=Object(s.b)(null,(function(e){return{authSignup:function(t,a,n,r,i){return e(x(t,a,n,r,i))},setPicture:function(t){return e((a=t,function(e){e({type:"PROFILE_OP_START"});var t=localStorage.getItem("access_token"),n=new FormData;return n.append("picture",a,a.name),d.a.put(E(),n,N("multipart/form-data",t)).then((function(t){e(function(e){return{type:"PROFILE_PICTURE_UPDATE",picture:e}}(t.data.picture)),e(S("Immagine modificata con successo!","success"))})).catch((function(t){return e(w(t)),e({type:"PROFILE_OP_ERROR"}),t}))}));var a},postCar:function(t,a,n,r){return e(function(e,t,a,n){return function(r){r({type:"PROFILE_OP_START"});var i=localStorage.getItem("access_token"),o=localStorage.getItem("profile_id");return d.a.post(b(o),{name:e,tot_avail_seats:t,fuel:a,consumption:n},N("application/json",i)).then((function(e){var t=e.data,a=t.id,n=t.name,i=t.totSeats,o=t.fuel,l=t.consumption;r(function(e,t,a,n,r){return{type:"CAR_CREATE",id:e,name:t,totSeats:a,fuel:n,consumption:r}}(a,n,i,o,l))})).catch((function(e){return r(w(e)),r({type:"PROFILE_OP_ERROR"}),e}))}}(t,a,n,r))}}}))((function(e){var t=e.authSignup,a=e.setPicture,i=e.postCar,o=Object(n.useState)(""),l=Object(W.a)(o,2),c=l[0],u=l[1],s=Object(n.useState)(!1),m=Object(W.a)(s,2),d=m[0],p=m[1],f=Object(n.useState)(""),g=Object(W.a)(f,2),E=g[0],h=g[1],v=Object(n.useState)(""),b=Object(W.a)(v,2),O=b[0],S=b[1],w=Object(n.useState)(""),y=Object(W.a)(w,2),T=y[0],I=y[1],N=Object(n.useState)(!1),_=Object(W.a)(N,2),R=_[0],j=_[1],k=Object(n.useState)(""),C=Object(W.a)(k,2),x=C[0],P=C[1],A=Object(n.useState)(!1),L=Object(W.a)(A,2),F=L[0],U=L[1],D=Object(n.useState)(null),J=Object(W.a)(D,2),M=J[0],V=J[1],Q=Object(n.useState)(""),X=Object(W.a)(Q,2),K=X[0],te=X[1],ae=Object(n.useState)(""),ne=Object(W.a)(ae,2),re=ne[0],ie=ne[1],oe=Object(n.useState)(4),ce=Object(W.a)(oe,2),pe=ce[0],fe=ce[1],ge=Object(n.useState)(10),Ee=Object(W.a)(ge,2),he=Ee[0],ve=Ee[1],be=Object(n.useState)(1),Oe=Object(W.a)(be,2),Se=Oe[0],we=Oe[1],ye=Object(n.useState)(!0),Te=Object(W.a)(ye,2),Ie=Te[0],Ne=Te[1],_e=["Personal Info","Add your Car","Submit!"],Re=de(),je=r.a.useState(0),ke=Object(W.a)(je,2),Ce=ke[0],xe=ke[1],Pe=r.a.useState(new Set),Ae=Object(W.a)(Pe,2),Le=Ae[0],Fe=Ae[1],Ue=function(e){return 1===e},De=function(e){return Le.has(e)},We=function(){var e=Le;De(Ce)&&(e=new Set(e.values())).delete(Ce),xe((function(e){return e+1})),Fe(e)},Be=function(){xe((function(e){return e-1}))},He=function(){if(!Ue(Ce))throw new Error("You can't skip a step that isn't optional.");xe((function(e){return e+1})),Fe((function(e){var t=new Set(e.values());return t.add(Ce),t}))};Ce===_e.length&&t(T,E,O,c,x).then((function(e){console.log(e),void 0!==e?(Ne(!1),xe(0)):(i(re,pe,Se,he),a(M),at.push("/home"))}));var qe=!function(e){switch(e){case 0:return!d&&c.length>0&&!R&&T.length>0&&!F&&x.length>0;case 1:return re.length>0;default:return!0}}(Ce);return r.a.createElement("div",{className:Re.root},r.a.createElement(B.a,{variant:"h5",align:"center",className:Re.title},"Sign Up!"),r.a.createElement(H.a,null),r.a.createElement(q.a,{activeStep:Ce,orientation:"vertical"},_e.map((function(e,t){var a={},n={};return Ue(t)&&(n.optional=r.a.createElement(B.a,{variant:"caption"},"Optional")),De(t)&&(a.completed=!1),r.a.createElement($.a,Object.assign({key:e},a),r.a.createElement(z.a,n,e),r.a.createElement(ee.a,null,function(e){switch(e){case 0:return r.a.createElement(Y,{firstName:E,setFirstName:h,lastName:O,setLastName:S,username:T,setUsername:I,usernameError:R,setUsernameError:j,email:c,setEmail:u,emailError:d,setEmailError:p,password:x,setPassword:P,passwordError:F,setPasswordError:U,image:M,setImage:V,imageURL:K,setImageURL:te});case 1:return r.a.createElement(le,{name:re,setName:ie,totSeats:pe,setTotSeats:fe,consumption:he,setConsumption:ve,fuel:Se,setFuel:we});case 2:return r.a.createElement(ue,{firstName:E,lastName:O,username:T,email:c,password:x,imageURL:K,carName:re,totSeats:pe,consumption:he,fuel:Se});default:return"Unknown step"}}(t),r.a.createElement("div",null,r.a.createElement(G.a,{disabled:0===Ce,onClick:Be,className:Re.button},"Back"),Ue(Ce)&&r.a.createElement(G.a,{variant:"contained",color:"primary",onClick:He,className:Re.button},"Skip"),r.a.createElement(G.a,{variant:"contained",color:"primary",onClick:We,className:Re.button,disabled:qe},Ce===_e.length-1?"SignUP!":"Next"))))}))),Ce===_e.length&&r.a.createElement(me.a,{className:Re.backdrop,open:Ie},r.a.createElement(se.a,{className:Re.loading},r.a.createElement(B.a,{className:Re.loadingTypography},"Loading your data!"),r.a.createElement(Z.a,{color:"inherit"}))))})),fe=(Object(c.a)(),function(e){return r.a.createElement("div",null,r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/signup"},r.a.createElement(D,null,r.a.createElement(pe,null)))))}),ge=a(444),Ee=a(436),he=a(386),ve=a(225),be=a.n(ve),Oe=Object(u.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function Se(e){var t=Oe(),a=r.a.useState(!0),n=Object(W.a)(a,2),i=n[0],o=n[1],l=e.alert;return r.a.createElement("div",{className:t.root},r.a.createElement(he.a,{in:i},r.a.createElement(ge.a,{severity:l.style,action:r.a.createElement(Ee.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){o(!1)}},r.a.createElement(be.a,{fontSize:"inherit"}))},l.text)))}function we(e){var t=e.alerts.map((function(e){return r.a.createElement(Se,{key:e.id,alert:e})}));return r.a.createElement("div",{className:"alert-container"},t)}var ye=a(56),Te=a(441),Ie=a(442),Ne=a(20),_e=a(227),Re=a.n(_e),je=a(237),ke=a(440),Ce=a(233),xe=a(228),Pe=a.n(xe),Ae=a(148),Le=a.n(Ae),Fe=a(147),Ue=a.n(Fe),De=a(229),We=a.n(De),Be=a(232),He=a(448),qe=Object(Be.a)({palette:{primary:{light:"#52c7b8",main:"#009688",dark:"#00675b",contrastText:"#000"},secondary:{light:"#ffc246",main:"#ff9100",dark:"#c56200",contrastText:"#000"},background:{paper:"#f0f0f0"}}}),$e=qe=Object(He.a)(qe),ze=a(449),Ge=a(427),Je=a(385),Me=a(438),Ve=a(437),Ze=a(226),Qe=a.n(Ze),Xe=Object(u.a)((function(e){return{root:{width:"100%",maxWidth:"36ch",backgroundColor:e.palette.background.paper},inline:{display:"inline"}}}));function Ke(e){var t=e.notification,a=e.history;Xe();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Je.a,{alignItems:"flex-start",disabled:t.read,component:"a",href:"#",onClick:a.push(t.url)},r.a.createElement(Ve.a,null,r.a.createElement(Qe.a,null)),r.a.createElement(Me.a,{primary:t.title,secondary:t.content})),r.a.createElement(H.a,{variant:"inset",component:"li"}))}var Ye=Re()((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(ye.a)({color:"inherit",textDecoration:"inherit",display:"none",outline:0,marginLeft:10},e.breakpoints.up("sm"),{display:"block"}),search:Object(ye.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Ne.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Ne.b)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:5,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(ye.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),sectionDesktop:Object(ye.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(ye.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),logo:{maxHeight:"60px",outline:0},list:{width:250},fullList:{width:"auto"},drawerTitle:{margin:10},logout:{marginLeft:20}}}));var et=Object(s.b)((function(e){return{isAuthenticated:void 0!==e.auth.token,notificationsNumber:e.notifications.notifications.filter((function(e){return e.read})).length,notifications:e.notifications.notifications}}),(function(e){return{authLogout:function(){return e(P())}}}))((function(e){var t=e.isAuthenticated,a=e.notifications,n=e.notificationsNumber,i=e.authLogout,o=Ye(),l=r.a.useState(null),c=Object(W.a)(l,2),u=c[0],s=c[1],m=r.a.useState(!1),d=Object(W.a)(m,2),p=d[0],f=d[1],g=function(e){return function(t){("keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&f(e)}},E=Boolean(u),h=r.a.createElement(G.a,{color:"inherit",className:o.logout,onClick:function(){i()}}," Logout"),v=r.a.createElement(Ce.a,{anchorEl:u,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu-mobile",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:E,onClose:function(){s(null)}},r.a.createElement(ae.a,null,r.a.createElement(Ee.a,{"aria-label":"show ".concat(n," new notifications"),color:"inherit"},r.a.createElement(ke.a,{badgeContent:n,color:"secondary"},r.a.createElement(Ue.a,null))),r.a.createElement("p",null,"Notifications")),r.a.createElement(ae.a,{onClick:g(!0)},r.a.createElement(Ee.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit"},r.a.createElement(Le.a,null)),r.a.createElement("p",null,"Profile")),r.a.createElement(ae.a,null,h)),b=a.map((function(e){return r.a.createElement(Ke,{key:e.id,notification:e})})),O=r.a.createElement(ze.a,{anchor:"right",open:p,onClose:g(!1)},r.a.createElement("div",{className:o.list,role:"presentation",onClick:g(!1),onKeyDown:g(!1)},r.a.createElement(H.a,null),r.a.createElement(B.a,{className:o.drawerTitle,variant:"h6"},"Notifications:"),r.a.createElement(H.a,null),r.a.createElement(Ge.a,null,b)));return r.a.createElement("div",{className:o.grow},r.a.createElement(Te.a,{position:"static"},r.a.createElement(Ie.a,null,r.a.createElement("a",{className:o.logo,href:"#",onClick:function(){t?at.push("/home"):at.push("/")}},r.a.createElement("img",{src:"logo.svg",alt:"logo",className:o.logo})),r.a.createElement(B.a,{className:o.title,variant:"h6",noWrap:!0,component:"a",href:"#",onClick:function(){t?at.push("/home"):at.push("/")}},"DM Project"),t?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:o.search},r.a.createElement("div",{className:o.searchIcon},r.a.createElement(Pe.a,null)),r.a.createElement(je.a,{placeholder:"Search\u2026",classes:{root:o.inputRoot,input:o.inputInput},inputProps:{"aria-label":"search"}})),r.a.createElement("div",{className:o.grow}),r.a.createElement("div",{className:o.sectionDesktop},r.a.createElement(Ee.a,{"aria-label":"show ".concat(n," new notifications"),color:"inherit",onClick:g(!0)},r.a.createElement(ke.a,{badgeContent:n,color:"secondary"},r.a.createElement(Ue.a,null))),r.a.createElement(Ee.a,{edge:"end","aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",onClick:function(){},color:"inherit"},r.a.createElement(Le.a,null)),h),r.a.createElement("div",{className:o.sectionMobile},r.a.createElement(Ee.a,{"aria-label":"show more","aria-controls":"primary-search-account-menu-mobile","aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},color:"inherit"},r.a.createElement(We.a,null)))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:o.grow}),r.a.createElement(G.a,{variant:"contained",color:"secondary",disableElevation:!0,onClick:function(){at.push("/signup")}},"Signup"),r.a.createElement(G.a,{color:"inherit",disableElevation:!0,onClick:function(){at.push("/login")}},"Login")))),v,O)})),tt=a(439),at=Object(c.a)();var nt=Object(s.b)((function(e){return{username:e.profile.user.username,alerts:e.alerts}}),(function(e){return{onTryAutoSignup:function(){return e((function(e){var t=localStorage.getItem("access_token");if(void 0===t||null===t)e(P());else{var a=new Date(localStorage.getItem("expiration_date"));a<=new Date?e(P()):(e(j(t)),e(_()),e(R()),e(k((a.getTime()-(new Date).getTime())/1e3)))}}))}}}))((function(e){return Object(n.useEffect)((function(){e.onTryAutoSignup()})),r.a.createElement(l.b,{history:at},r.a.createElement(tt.a,{theme:$e},r.a.createElement(et,null),r.a.createElement(we,{alerts:e.alerts}),r.a.createElement(fe,null)))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var rt=a(53),it=a(230),ot={token:void 0,loading:!1},lt=function(e,t){return I(e,{loading:!0})},ct=function(e,t){return I(e,{token:t.token,loading:!1})},ut=function(e,t){return I(e,{loading:!1})},st=function(e,t){return I(e,{token:void 0})},mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return lt(e);case"AUTH_SUCCESS":return ct(e,t);case"AUTH_ERROR":return ut(e);case"AUTH_LOGOUT":return st(e);default:return e}},dt=a(234),pt=a(231),ft=a.n(pt),gt=[],Et=function(e,t){return window.scrollTo(0,0),[].concat(Object(dt.a)(e),[{text:t.text,style:t.style,id:ft()()}])},ht=function(e,t){return e.filter((function(e){return e.id!==t.id}))},vt=function(e,t){return gt},bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ALERT":return Et(e,t);case"REMOVE_ALERT":return ht(e,t);case"REMOVE_ALL_ALERTS":return vt();default:return e}},Ot={id:"",picture:"",score:0,carSet:[],averageVote:0,receivedFeedback:[],givenFeedback:[],user:{},loading:!1},St=function(e,t){return I(e,{loading:!0})},wt=function(e,t){var a=t.id,n=t.picture,r=t.score,i=t.carSet,o=t.averageVote,l=t.receivedFeedback,c=t.givenFeedback,u=t.user;return I(e,{loading:!1,id:a,picture:n,score:r,carSet:i,averageVote:o,receivedFeedback:l,givenFeedback:c,user:u})},yt=function(e,t){return I(e,{loading:!1,picture:t.picture})},Tt=function(e,t){return I(e,{loading:!1})},It=function(e,t){var a=t.id,n=t.firstName,r=t.lastName,i=t.email,o=e.user;return o.id=a,o.firstName=n,o.lastName=r,o.email=i,I(e,{loading:!1,user:o})},Nt=function(e,t){return Ot},_t=function(e,t){var a=t.id,n=t.name,r=t.totSeats,i=t.fuel,o=t.consumption;return e.carSet.push({id:a,name:n,totSeats:r,fuel:i,consumption:o}),e.loading=!1,e},Rt=function(e,t){var a=t.id,n=t.name,r=t.totSeats,i=t.fuel,o=(t.consumption,e.carSet.findIndex((function(e){return e.id===a})));return e.carSet[o].name=n,e.carSet[o].totSeats=r,e.carSet[o].fuel=i,e.carSet[o].consumption=i,e.loading=!1,e},jt=function(e,t){var a=e.carSet.filter((function(e){return e.id!==t}));return I(e,{carSet:a,loading:!1})},kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PROFILE_OP_START":return St(e);case"GET_PROFILE_SUCCESS":return wt(e,t);case"PROFILE_PICTURE_UPDATE":return yt(e,t);case"PROFILE_OP_ERROR":return Tt(e);case"USER_DATA_UPDATE":return It(e,t);case"CLEAR_PROFILE_DATA":return Nt();case"CAR_CREATE":return _t(e,t);case"CAR_UPDATE":return Rt(e,t);case"CAR_DELETE":return jt(e,t);default:return e}},Ct={loading:!1,notifications:[]},xt=function(e,t){return I(e,{loading:!0})},Pt=function(e,t){return I(e,{loading:!1})},At=function(e,t){return I(e,{notifications:t.notifications})},Lt=function(e,t){var a=t.id,n=(t.read,e.notifications.findIndex((function(e){return e.id===a})));return e.notifications[n].read=t,e},Ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTIFICATIONS_START":return xt(e);case"NOTIFICATIONS_ERROR":return Pt(e);case"GET_NOTIFICATIONS_SUCCESS":return At(e,t);case"NOTIFICATION_UPDATE":return Lt(e,t);case"CLEAR_NOTIFICATIONS":return Ct;default:return e}},Ut=Object(rt.c)({auth:mt,alerts:bt,profile:kt,notifications:Ft}),Dt=[it.a],Wt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||rt.d,Bt=Object(rt.e)(Ut,{},Wt(rt.a.apply(void 0,Dt)));o.a.render(r.a.createElement(s.a,{store:Bt},r.a.createElement(nt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[247,1,2]]]);
//# sourceMappingURL=main.2896c699.chunk.js.map