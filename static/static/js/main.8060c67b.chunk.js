(this["webpackJsonpreact-fontend"]=this["webpackJsonpreact-fontend"]||[]).push([[0],{244:function(e,t,a){e.exports=a.p+"static/media/logo.3ea4a202.svg"},273:function(e,t,a){e.exports=a(406)},278:function(e,t,a){},279:function(e,t,a){},327:function(e,t){},329:function(e,t){},363:function(e,t){},364:function(e,t){},406:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),c=a.n(o),i=(a(278),a(279),a(252)),l=a(38),u=a(450),s="/home",m=a(25),d=a(18),g=a.n(d),p="283420556311-30r26g3mtt5odkqmit6u7onam3qrul16.apps.googleusercontent.com",f="4mOLHPfJL0zueHOlawvJXsdnImpjOv3PmLdmm3NT",h="FW4dYuZsLmE6PQHk7qrPAc4shQhdx2hknqNOh58XO3JQ6PFI8um2z6wyJubxF6hKNOOOJfZUQ67jm5ApN5HJioq4XsNAGSbCLiQZqrqfo6jiy67ddpvMOl3Be8SATFSL",E="http://localhost:8000/api/v0.1/",v=function(){return E+"current-profile/"},b=function(){return E+"auth/token"},O=function(){return E+"signup/"},y=function(e){return"".concat(function(e){return E+"profiles/".concat(e,"/")}(e),"cars/")},w=function(){return"".concat(v(),"notifications/")},S=function(e,t){return function(a){a({type:"ADD_ALERT",text:e,style:t})}},j=function(e){return function(t){e.response?t(S(JSON.stringify(e.response.data),"error")):t(S(e.toString(),"error"))}},k=a(135),N=a(80),x=function(e,t){return Object(N.a)({},e,{},t)},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=Object(N.a)({headers:Object(N.a)({"Content-type":e},a)},n);return null!=t&&(r=Object(N.a)({},r,{headers:Object(N.a)({},r.headers,{Authorization:"Bearer ".concat(t)})})),r},C=function(e){var t="",a="",n=e.address;return"postcode"in n&&(a+="".concat(n.postcode," ")),"house_number"in n?(t="".concat(n.road,", ").concat(n.house_number),"hamlet"in n&&(a+="".concat(n.hamlet," ")),"town"in n?a+="".concat(n.town," "):"village"in n&&(a+="".concat(n.village," ")),"county"in n?a+="".concat(n.county):"province"in n&&(a+="".concat(n.province," "))):"road"in n?(t=n.road,"hamlet"in n&&(a+="".concat(n.hamlet," ")),"town"in n?a+="".concat(n.town," "):"village"in n&&(a+="".concat(n.village," ")),"county"in n?a+="".concat(n.county):"province"in n&&(a+="".concat(n.province," "))):"hamlet"in n?(t=n.hamlet,"town"in n?a+="".concat(n.town," "):"village"in n&&(a+="".concat(n.village," ")),"county"in n?a+="".concat(n.county):"province"in n&&(a+="".concat(n.province," "))):"town"in n?(t=n.town,"county"in n?a+="".concat(n.county):"province"in n&&(a+="".concat(n.province," "))):"village"in n?(t=n.village,"county"in n?a+="".concat(n.county):"province"in n&&(a+="".concat(n.province," "))):"county"in n?(t=n.county,a+=n.country):"province"in n&&(t=n.province,a+=n.country),{primary:t,secondary:a}},T=function(){return function(e){e({type:"PROFILE_OP_START"});var t=localStorage.getItem("access_token");return g.a.get(v(),I("application/json",t)).then((function(t){var a=t.data,n=a.id,r=a.user,o=a.picture,c=a.score,i=a.car_set,l=a.average_vote,u=a.received_feedback,s=a.given_feedback;return localStorage.setItem("profile_id",n),e((function(e){e({type:"REMOVE_ALL_ALERTS"})})),e(function(e,t,a,n,r,o,c,i){return{type:"GET_PROFILE_SUCCESS",id:e,picture:a,score:n,carSet:r,averageVote:o,receivedFeedback:c,givenFeedback:i,user:t}}(n,r,o,c,i,l,u,s))})).catch((function(t){return e({type:"PROFILE_OP_ERROR"}),e(j(t)),t}))}},_=function(){return function(e){e({type:"NOTIFICATIONS_START"});var t=localStorage.getItem("access_token");return g.a.get(w(),I("application/json",t)).then((function(t){e({type:"GET_NOTIFICATIONS_SUCCESS",notifications:t.data})})).catch((function(t){return e(j(t)),e({type:"NOTIFICATIONS_ERROR"}),t}))}},R=function(e){return{type:"AUTH_SUCCESS",token:e}},A=function(e){return function(t){var a=localStorage.getItem("refresh_token");setTimeout((function(){t(L(a))}),1e3*e)}},L=function(e){return function(t){return g.a.post(b(),k.stringify({client_id:f,client_secret:h,grant_type:"refresh_token",refresh_token:e}),I("application/x-www-form-urlencoded")).then((function(e){var a=e.data.access_token,n=e.data.refresh_token,r=new Date((new Date).getTime()+36e5);localStorage.setItem("access_token",a),localStorage.setItem("refresh_token",n),localStorage.setItem("expiration_date",r),t(R(a)),t(T()),t(_()),t(A(3600))})).catch((function(e){return t({type:"AUTH_ERROR"}),t(j(e)),e}))}},P=function(e){return function(t){return t({type:"AUTH_START"}),g.a.post(E+"auth/convert-token",k.stringify({client_id:f,client_secret:h,grant_type:"convert_token",backend:"google-oauth2",token:e}),I("application/x-www-form-urlencoded")).then((function(e){var a=e.data.access_token,n=e.data.refresh_token,r=new Date((new Date).getTime()+36e5);return localStorage.setItem("access_token",a),localStorage.setItem("refresh_token",n),localStorage.setItem("expiration_date",r),t(R(a)),t(_()),t(A(3600)),t(T())})).catch((function(e){return t({type:"AUTH_ERROR"}),t(j(e)),e}))}},F=function(e,t){return function(a){return a({type:"AUTH_START"}),g.a.post(b(),k.stringify({client_id:f,client_secret:h,grant_type:"password",username:e,password:t}),I("application/x-www-form-urlencoded")).then((function(e){var t=e.data.access_token,n=e.data.refresh_token,r=new Date((new Date).getTime()+36e5);return localStorage.setItem("access_token",t),localStorage.setItem("refresh_token",n),localStorage.setItem("expiration_date",r),a(R(t)),a(A(3600)),a(_()),a(T())})).catch((function(e){return a({type:"AUTH_ERROR"}),a(j(e)),e}))}},D=function(){return function(e){e((localStorage.clear(),{type:"AUTH_LOGOUT"})),e((function(e){return e({type:"CLEAR_PROFILE_DATA"})})),e((function(e){e({type:"CLEAR_NOTIFICATIONS"})}))}},U=a(452),B=a(174),W=a(54),H=Object(u.a)((function(e){return{root:{minWidth:"100vw",backgroundColor:W.white,alignItems:"center",flexDirection:"column",display:"flex"},formPaper:{flexDirection:"column",alignItems:"center",display:"flex",flexWrap:"wrap",margin:20,maxWidth:"55ch",minWidth:"10ch",backgroundColor:e.palette.background.paper},inline:{display:"inline"}}})),G=Object(m.b)((function(e){return{isAuthenticated:void 0!==e.auth.token}}),null)((function(e){var t=e.children,a=e.isAuthenticated;Object(n.useEffect)((function(){a&&Jt.push(s)}));var o=H();return r.a.createElement(U.a,{className:o.root,maxWidth:"xs"},r.a.createElement(B.a,{className:o.formPaper},t))})),q=a(9),z=a(81),M=a(464),J=a(494),$=a(465),V=a(486),Z=a(454),K=a(491),Q=a(460),X=a(456),Y=a(461),ee=a(490),te=a(453),ae=a(125),ne=a.n(ae),re=a(78);function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ce(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var ie=r.a.createElement("style",{type:"text/css"},"\n\t.st0{fill:#4285F4;}\n\t.st1{fill:#34A853;}\n\t.st2{fill:#FBBC04;}\n\t.st3{fill:#EA4335;}\n"),le=r.a.createElement("g",null,r.a.createElement("path",{className:"st0",d:"M533.5,278.4c0-18.5-1.5-37.1-4.7-55.3H272.1v104.8h147c-6.1,33.8-25.7,63.7-54.4,82.7v68h87.7 C503.9,431.2,533.5,361.2,533.5,278.4z"}),r.a.createElement("path",{className:"st1",d:"M272.1,544.3c73.4,0,135.3-24.1,180.4-65.7l-87.7-68c-24.4,16.6-55.9,26-92.6,26c-71,0-131.2-47.9-152.8-112.3 H28.9v70.1C75.1,486.3,169.2,544.3,272.1,544.3z"}),r.a.createElement("path",{className:"st2",d:"M119.3,324.3c-11.4-33.8-11.4-70.4,0-104.2V150H28.9c-38.6,76.9-38.6,167.5,0,244.4L119.3,324.3z"}),r.a.createElement("path",{className:"st3",d:"M272.1,107.7c38.8-0.6,76.3,14,104.4,40.8l0,0l77.7-77.7C405,24.6,339.7-0.8,272.1,0C169.2,0,75.1,58,28.9,150 l90.4,70.1C140.8,155.6,201.1,107.7,272.1,107.7z"})),ue=function(e){var t=e.svgRef,a=e.title,n=ce(e,["svgRef","title"]);return r.a.createElement("svg",oe({id:"Livello_1",x:"0px",y:"0px",viewBox:"0 0 533.5 544.3",style:{enableBackground:"new 0 0 533.5 544.3"},xmlSpace:"preserve",ref:t},n),a?r.a.createElement("title",null,a):null,ie,le)},se=r.a.forwardRef((function(e,t){return r.a.createElement(ue,oe({svgRef:t},e))})),me=(a.p,a(484)),de=Object(u.a)((function(e){return{root:{marginBottom:e.spacing(2),width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%"},button:{marginRight:e.spacing(1),marginBottom:e.spacing(1)},imageInput:{display:"none"},imageProgress:{marginLeft:e.spacing(1)},imgPreview:{color:e.palette.getContrastText(e.palette.secondary.dark),backgroundColor:e.palette.secondary.dark,margin:10,maxWidth:"9ch",minWidth:"6ch",maxHeight:"9ch",minHeight:"6ch"},googleLogin:{width:"100%",backgroundColor:"white"},editAlert:{width:"90%"}}})),ge=function(e){var t=e.firstName,a=e.setFirstName,o=e.lastName,c=e.setLastName,i=e.username,l=e.setUsername,u=e.usernameError,s=e.setUsernameError,m=e.password,d=e.setPassword,f=e.passwordError,h=e.setPasswordError,E=e.email,v=e.setEmail,b=e.emailError,O=e.setEmailError,y=e.image,w=e.setImage,S=e.imageURL,j=e.setImageURL,k=e.isGoogleLogin,N=e.setGoogleLogin,x=e.setGoogleAccessToken,I=e.handleNext,C=de(),T=Object(n.useState)(""),_=Object(q.a)(T,2),R=_[0],A=_[1],L=Object(n.useState)(""),P=Object(q.a)(L,2),F=P[0],D=P[1],U=Object(n.useState)(""),B=Object(q.a)(U,2),W=B[0],H=B[1],G=function(e){J(),null===e.target.value||""===e.target.value?(O(!0),A("Required")):/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e.target.value)?(O(!1),A("")):(O(!0),A("Not a valid email")),v(e.target.value)},z=function(e){J(),null===e.target.value||""===e.target.value?(s(!0),H("Required")):(s(!1),H("")),l(e.target.value)},M=function(e){J(),null===e.target.value||""===e.target.value?(h(!0),D("Required")):/^[\w!@#$%^&*]{8,}$/.test(e.target.value)?/^(?=.*[\d])[\w!@#$%^&*]{8,}$/.test(e.target.value)?/^(?=.*[A-Z])(?=.*[\d])[\w!@#$%^&*]{8,}$/.test(e.target.value)?/^(?=.*[a-z])(?=.*[A-Z])(?=.*[\d])[\w!@#$%^&*]{8,}$/.test(e.target.value)?/^(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z])(?=.*[\d])[\w!@#$%^&*]{8,}$/.test(e.target.value)?(h(!1),D("")):(h(!0),D("Should contain at least 1 special character")):(h(!0),D("Should contain at least 1 lowercase")):(h(!0),D("Should contain at least 1 capital")):(h(!0),D("Should contain at least 1 number")):(h(!0),D("Should be at least 8 character long")),d(e.target.value)},J=function(){x(""),N(!1)},$=(""!==t?t.toUpperCase().charAt(0):"")+(""!==o?o.toUpperCase().charAt(0):"");return r.a.createElement("div",{className:C.root},r.a.createElement(ee.a,{src:S,className:C.imgPreview},""!==$?$:null),r.a.createElement("form",{className:C.form},r.a.createElement(te.a,{container:!0,spacing:2},r.a.createElement(te.a,{item:!0,xs:12},r.a.createElement(ne.a,{isSignedIn:!1,onSuccess:function(e){var t=e.profileObj.email.split("@")[0].replace(" ","_").replace(".","_");x(e.accessToken),N(!0),a(e.profileObj.givenName),c(e.profileObj.familyName),v(e.profileObj.email),l(t),j(e.profileObj.imageUrl),g.a.get(e.profileObj.imageUrl,{responseType:"blob"}).then((function(e){var a=e.data,n=e.data.type.split("/").pop();a.name="".concat(t,".").concat(n),w(a)})),I()},onFailure:function(){},clientId:p,render:function(e){return r.a.createElement(Z.a,{variant:"contained",className:C.googleLogin,onClick:e.onClick,startIcon:r.a.createElement(re.a,{component:se,viewBox:"0 0 533.5 544.3"})},"Signup with Google")}})),k&&r.a.createElement(te.a,{item:!0,xs:12},r.a.createElement(me.a,{className:C.editAlert,severity:"warning"},"Editing these info will undo your Google Signup")),r.a.createElement(te.a,{item:!0,xs:12,sm:6},r.a.createElement(K.a,{variant:"outlined",fullWidth:!0,id:"name",label:"First Name",placeholder:"James",value:t,onChange:function(e){J(),a(e.target.value)},autoComplete:"name"})),r.a.createElement(te.a,{item:!0,xs:12,sm:6},r.a.createElement(K.a,{variant:"outlined",fullWidth:!0,id:"surname",label:"Last Name",placeholder:"Bond",value:o,onChange:function(e){J(),c(e.target.value)},autoComplete:"family-name"})),r.a.createElement(te.a,{item:!0,xs:12},r.a.createElement(K.a,{variant:"outlined",fullWidth:!0,required:!0,id:"username",label:"Username",value:i,placeholder:"jamesbond007",helperText:W,onChange:z,onBlur:z,error:u,autoComplete:"username"})),r.a.createElement(te.a,{item:!0,xs:12},r.a.createElement(K.a,{variant:"outlined",fullWidth:!0,required:!0,id:"email",label:"E-mail",placeholder:"jamesbond@mi6.co.uk",type:"email",error:b,helperText:R,onChange:G,onBlur:G,value:E,autoComplete:"email"})),r.a.createElement(te.a,{item:!0,xs:12},r.a.createElement(K.a,{variant:"outlined",fullWidth:!0,required:!0,id:"password",label:"Password",error:f,value:m,type:"password",helperText:F,onChange:M,onBlur:M,autoComplete:"new-password"})),r.a.createElement(te.a,{item:!0,xs:12},r.a.createElement(Z.a,{fullWidth:!0,variant:"contained",color:"secondary",component:"label",justify:"flex-end",className:C.button,startIcon:r.a.createElement(Q.a,null)},"Picture",r.a.createElement(X.a,{className:C.imageInput,type:"file",controlled:"true",onChange:function(e){J(),w("loading");var t=new FileReader,a=e.target.files[0];t.onloadend=function(){j(t.result)},w(a),t.readAsDataURL(a)}}),"loading"===y?r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{size:"2ch",className:C.imageProgress})):r.a.createElement(r.a.Fragment,null))))))},pe=a(466),fe=a(485),he=a(462),Ee=a(458),ve=a(493),be=a(463),Oe=Object(u.a)((function(e){return{root:{marginBottom:e.spacing(2),width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%"},button:{marginRight:e.spacing(1),marginBottom:e.spacing(1)}}})),ye=function(e){var t=e.name,a=e.setName,o=e.totSeats,c=e.setTotSeats,i=e.consumption,l=e.setConsumption,u=e.fuel,s=e.setFuel,m=Oe(),d=Object(n.useState)(!1),g=Object(q.a)(d,2),p=g[0],f=g[1];return r.a.createElement("div",{className:m.root},r.a.createElement(Ee.a,{variant:"outlined",className:m.form},r.a.createElement(te.a,{container:!0,spacing:2},r.a.createElement(te.a,{item:!0,xs:12,sm:6},r.a.createElement(K.a,{fullWidth:!0,id:"car-name",label:"Name",placeholder:"Fiat Uno 1992",value:t,onChange:function(e){var t=e.target.value;t.length>0?f(!1):f(!0),a(t)},onBlur:function(e){(e.target.value.length<0||""===e.target.value)&&f(!0)},error:p,required:!0,helperText:p?"Required":"",autoComplete:"name"})),r.a.createElement(te.a,{item:!0,xs:12,sm:6},r.a.createElement(Ee.a,{variant:"outlined"},r.a.createElement(ve.a,{id:"tot-seats-label"},"Seats"),r.a.createElement(fe.a,{id:"tot-seats",label:"Seats",labelId:"tot-seats-label",value:o,onChange:function(e){c(e.target.value)}},r.a.createElement(he.a,{value:2},"2"),r.a.createElement(he.a,{value:3},"3"),r.a.createElement(he.a,{value:4},"4"),r.a.createElement(he.a,{value:5},"5"),r.a.createElement(he.a,{value:6},"6"),r.a.createElement(he.a,{value:7},"7"),r.a.createElement(he.a,{value:8},"8"),r.a.createElement(he.a,{value:9},"9")))),r.a.createElement(te.a,{item:!0,xs:12,sm:6},r.a.createElement(Ee.a,{variant:"outlined"},r.a.createElement(ve.a,{id:"fuel-label"},"Fuel"),r.a.createElement(fe.a,{id:"fuel",labelId:"fuel-label",label:"Fuel",value:u,onChange:function(e){s(e.target.value)}},r.a.createElement(he.a,{value:1},"Petrol"),r.a.createElement(he.a,{value:2},"Diesel"),r.a.createElement(he.a,{value:3},"Gas"),r.a.createElement(he.a,{value:4},"Electric")))),r.a.createElement(te.a,{item:!0,xs:12,sm:6},r.a.createElement(K.a,{type:"number",helperText:"Between 5 and 25",step:.05,label:"Consumption",value:i,InputProps:{endAdornment:r.a.createElement(be.a,{position:"end"},"l/100Km")},onChange:function(e){l(e.target.value)},onBlur:function(e){var t=e.target.value;t<5&&(e.target.value=5),t>20&&(e.target.value=20),l(e.target.value)}})))))},we=Object(u.a)((function(e){return{root:{marginBottom:e.spacing(5),width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%"},button:{marginRight:e.spacing(1),marginBottom:e.spacing(1)},imageInput:{display:"none"},imageProgress:{marginLeft:e.spacing(1)},imgPreview:{margin:10,maxWidth:"9ch",minWidth:"6ch",maxHeight:"9ch",minHeight:"6ch"},instruction:{marginBottom:e.spacing(2)},carDivider:{width:"123%",marginTop:e.spacing(5),marginRight:"22px",marginBottom:e.spacing(5)}}})),Se=function(e){var t=e.firstName,a=e.lastName,n=e.username,o=e.password,c=e.email,i=e.imageURL,l=e.carName,u=e.totSeats,s=e.consumption,m=e.fuel,d=e.isGoogleLogin,g=we();return r.a.createElement("div",{className:g.root},r.a.createElement(z.a,{className:g.instruction},"Review you're data before submitting!"),r.a.createElement(ee.a,{src:""!==i?i:"http://localhost:8000/media/default-profile.jpg",className:g.imgPreview}),r.a.createElement(Ee.a,{variant:"outlined",className:g.form},r.a.createElement(te.a,{container:!0,spacing:2},d&&r.a.createElement(r.a.Fragment,null,r.a.createElement(te.a,{item:!0,xs:12},r.a.createElement(me.a,{severity:"info"},"Signing in with Google"))),r.a.createElement(te.a,{item:!0,xs:12,sm:6},r.a.createElement(K.a,{fullWidth:!0,id:"name",label:"First Name",value:t,InputProps:{readOnly:!0}})),r.a.createElement(te.a,{item:!0,xs:12,sm:6},r.a.createElement(K.a,{fullWidth:!0,id:"surname",label:"Last Name",value:a,InputProps:{readOnly:!0}})),r.a.createElement(te.a,{item:!0,xs:12},r.a.createElement(K.a,{fullWidth:!0,id:"username",label:"Username",value:n,InputProps:{readOnly:!0}})),r.a.createElement(te.a,{item:!0,xs:12},r.a.createElement(K.a,{fullWidth:!0,id:"email",label:"E-mail",type:"email",value:c,InputProps:{readOnly:!0}})),!d&&r.a.createElement(r.a.Fragment,null,r.a.createElement(te.a,{item:!0,xs:12},r.a.createElement(K.a,{fullWidth:!0,id:"password",label:"Password",value:o,type:"password",InputProps:{readOnly:!0}}))))),""!==l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{className:g.carDivider}),r.a.createElement(Ee.a,{variant:"outlined",className:g.form},r.a.createElement(te.a,{container:!0,spacing:2},r.a.createElement(te.a,{item:!0,xs:12,sm:6},r.a.createElement(K.a,{fullWidth:!0,id:"car-name",label:"Name",value:l,InputProps:{readOnly:!0}})),r.a.createElement(te.a,{item:!0,xs:12,sm:6},r.a.createElement(Ee.a,{variant:"outlined"},r.a.createElement(ve.a,{id:"tot-seats-label"},"Seats"),r.a.createElement(fe.a,{id:"tot-seats",label:"Seats",labelId:"tot-seats-label",value:u,inputProps:{readOnly:!0}},r.a.createElement(he.a,{value:2},"2"),r.a.createElement(he.a,{value:3},"3"),r.a.createElement(he.a,{value:4},"4"),r.a.createElement(he.a,{value:5},"5"),r.a.createElement(he.a,{value:6},"6"),r.a.createElement(he.a,{value:7},"7"),r.a.createElement(he.a,{value:8},"8"),r.a.createElement(he.a,{value:9},"9")))),r.a.createElement(te.a,{item:!0,xs:12,sm:6},r.a.createElement(Ee.a,{variant:"outlined"},r.a.createElement(ve.a,{id:"fuel-label"},"Fuel"),r.a.createElement(fe.a,{id:"fuel",labelId:"fuel-label",label:"Fuel",value:m,inputProps:{readOnly:!0}},r.a.createElement(he.a,{value:1},"Petrol"),r.a.createElement(he.a,{value:2},"Diesel"),r.a.createElement(he.a,{value:3},"Gas"),r.a.createElement(he.a,{value:4},"Electric")))),r.a.createElement(te.a,{item:!0,xs:12,sm:6},r.a.createElement(K.a,{type:"number",step:.05,label:"Consumption",value:s,InputProps:{endAdornment:r.a.createElement(be.a,{position:"end"},"l/100Km"),readOnly:!0}}))))))},je=a(487),ke=a(412),Ne=Object(u.a)((function(e){return{button:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},root:{width:"95%",margin:10},loading:{marginBottom:e.spacing(5),width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},loadingTypography:{marginBottom:e.spacing(2)}}}));var xe=Object(m.b)(null,(function(e){return{authSignup:function(t,a,n,r,o){return e(function(e,t,a,n,r){return function(o){return o({type:"AUTH_START"}),g.a.post(O(),{username:e,first_name:t,last_name:a,email:n,password:r},I("application/json")).then((function(t){return o(F(e,r))})).catch((function(e){return o({type:"AUTH_ERROR"}),o(j(e)),e}))}}(t,a,n,r,o))},googleLogin:function(t){return e(P(t))},setPicture:function(t){return e((a=t,function(e){e({type:"PROFILE_OP_START"});var t=localStorage.getItem("access_token"),n=new FormData;return n.append("picture",a,a.name),g.a.put(v(),n,I("multipart/form-data",t)).then((function(t){e(function(e){return{type:"PROFILE_PICTURE_UPDATE",picture:e}}(t.data.picture)),e(S("Immagine modificata con successo!","success"))})).catch((function(t){return e(j(t)),e({type:"PROFILE_OP_ERROR"}),t}))}));var a},postCar:function(t,a,n,r){return e(function(e,t,a,n){return function(r){r({type:"PROFILE_OP_START"});var o=localStorage.getItem("access_token"),c=localStorage.getItem("profile_id");return g.a.post(y(c),{name:e,tot_avail_seats:t,fuel:a,consumption:n},I("application/json",o)).then((function(e){var t=e.data,a=t.id,n=t.name,o=t.totSeats,c=t.fuel,i=t.consumption;r(function(e,t,a,n,r){return{type:"CAR_CREATE",id:e,name:t,totSeats:a,fuel:n,consumption:r}}(a,n,o,c,i))})).catch((function(e){return r(j(e)),r({type:"PROFILE_OP_ERROR"}),e}))}}(t,a,n,r))},addError:function(t){return e(S(t,"error"))}}}))((function(e){var t=e.authSignup,a=e.googleLogin,o=e.setPicture,c=e.postCar,i=e.addError,l=Object(n.useState)(""),u=Object(q.a)(l,2),m=u[0],d=u[1],g=Object(n.useState)(!1),p=Object(q.a)(g,2),f=p[0],h=p[1],E=Object(n.useState)(""),v=Object(q.a)(E,2),b=v[0],O=v[1],y=Object(n.useState)(""),w=Object(q.a)(y,2),S=w[0],j=w[1],k=Object(n.useState)(""),N=Object(q.a)(k,2),x=N[0],I=N[1],C=Object(n.useState)(!1),T=Object(q.a)(C,2),_=T[0],R=T[1],A=Object(n.useState)(""),L=Object(q.a)(A,2),P=L[0],F=L[1],D=Object(n.useState)(!1),U=Object(q.a)(D,2),B=U[0],W=U[1],H=Object(n.useState)(null),G=Object(q.a)(H,2),K=G[0],Q=G[1],X=Object(n.useState)(""),ee=Object(q.a)(X,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(""),re=Object(q.a)(ne,2),oe=re[0],ce=re[1],ie=Object(n.useState)(4),le=Object(q.a)(ie,2),ue=le[0],se=le[1],me=Object(n.useState)(10),de=Object(q.a)(me,2),fe=de[0],he=de[1],Ee=Object(n.useState)(1),ve=Object(q.a)(Ee,2),be=ve[0],Oe=ve[1],we=Object(n.useState)(!1),xe=Object(q.a)(we,2),Ie=xe[0],Ce=xe[1],Te=Object(n.useState)(""),_e=Object(q.a)(Te,2),Re=_e[0],Ae=_e[1],Le=Object(n.useState)(!0),Pe=Object(q.a)(Le,2),Fe=Pe[0],De=Pe[1],Ue=["Personal Info","Add your Car","Submit!"],Be=Ne(),We=r.a.useState(0),He=Object(q.a)(We,2),Ge=He[0],qe=He[1],ze=r.a.useState(new Set),Me=Object(q.a)(ze,2),Je=Me[0],$e=Me[1],Ve=function(e){return 1===e},Ze=function(e){return Je.has(e)},Ke=function(){var e=Je;Ze(Ge)&&(e=new Set(e.values())).delete(Ge),qe((function(e){return e+1})),$e(e)},Qe=function(){qe((function(e){return e-1}))},Xe=function(){Ve(Ge)||i("You can't skip a step that isn't optional."),1===Ge&&(ce(""),se(4),Oe(1),he(10)),qe((function(e){return e+1})),$e((function(e){var t=new Set(e.values());return t.add(Ge),t}))};Ge===Ue.length&&(Ie?a(Re).then((function(e){e instanceof Error?(i("An error occurred while signing you up with google"),console.log(e),De(!1),qe(0)):(""!==oe&&c(oe,ue,be,fe),""!==te&&o(K),Jt.push(s))})):t(x,b,S,m,P).then((function(e){e instanceof Error?(i("An error occurred while signing you up"),console.log(e),De(!1),qe(0)):(""!==oe&&c(oe,ue,be,fe),""!==te&&o(K),Jt.push(s))})));var Ye=!function(e){switch(e){case 0:return!f&&m.length>0&&!_&&x.length>0&&!B&&P.length>0||Ie;case 1:return oe.length>0;default:return!0}}(Ge);return r.a.createElement("div",{className:Be.root},r.a.createElement(z.a,{variant:"h5",align:"center",className:Be.title},"Sign Up!"),r.a.createElement(M.a,null),r.a.createElement(J.a,{activeStep:Ge,orientation:"vertical"},Ue.map((function(e,t){var a={},n={};return Ve(t)&&(n.optional=r.a.createElement(z.a,{variant:"caption"},"Optional")),Ze(t)&&(a.completed=!1),r.a.createElement($.a,Object.assign({key:e},a),r.a.createElement(V.a,n,e),r.a.createElement(pe.a,null,function(e){switch(e){case 0:return r.a.createElement(ge,{firstName:b,setFirstName:O,lastName:S,setLastName:j,username:x,setUsername:I,usernameError:_,setUsernameError:R,email:m,setEmail:d,emailError:f,setEmailError:h,password:P,setPassword:F,passwordError:B,setPasswordError:W,image:K,setImage:Q,imageURL:te,setImageURL:ae,isGoogleLogin:Ie,setGoogleLogin:Ce,setGoogleAccessToken:Ae,handleNext:Ke});case 1:return r.a.createElement(ye,{name:oe,setName:ce,totSeats:ue,setTotSeats:se,consumption:fe,setConsumption:he,fuel:be,setFuel:Oe});case 2:return r.a.createElement(Se,{firstName:b,lastName:S,username:x,email:m,password:P,imageURL:te,carName:oe,totSeats:ue,consumption:fe,fuel:be,isGoogleLogin:Ie});default:return"Unknown step"}}(t),r.a.createElement("div",null,r.a.createElement(Z.a,{disabled:0===Ge,onClick:Qe,className:Be.button},"Back"),Ve(Ge)&&r.a.createElement(Z.a,{variant:"contained",color:"primary",onClick:Xe,className:Be.button},"Skip"),r.a.createElement(Z.a,{variant:"contained",color:"primary",onClick:Ke,className:Be.button,disabled:Ye},Ge===Ue.length-1?"SignUP!":"Next"))))}))),Ge===Ue.length&&r.a.createElement(ke.a,{className:Be.backdrop,open:Fe},r.a.createElement(je.a,{className:Be.loading},r.a.createElement(z.a,{className:Be.loadingTypography},"Loading your data!"),r.a.createElement(Y.a,{color:"inherit"}))))})),Ie=a(240),Ce=a.n(Ie),Te=Object(u.a)((function(e){return{title:{backgroundColor:e.palette.background.paper,padding:e.spacing(1)},root:{width:"95%",margin:10},formContainer:{marginBottom:e.spacing(2),width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},loading:{marginBottom:e.spacing(5),width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},loadingTypography:{marginBottom:e.spacing(2)},form:{width:"90%"},googleLogin:{width:"100%",height:45,backgroundColor:"white",marginTop:e.spacing(2)},button:{marginRight:e.spacing(1),marginBottom:e.spacing(1)},imgPreview:{color:e.palette.getContrastText(e.palette.secondary.dark),backgroundColor:e.palette.secondary.dark,margin:10,maxWidth:"9ch",minWidth:"6ch",maxHeight:"9ch",minHeight:"6ch"}}}));var _e=Object(m.b)(null,(function(e){return{authLogin:function(t,a){return e(F(t,a))},googleLogin:function(t){return e(P(t))},addError:function(t){return e(S(t,"error"))}}}))((function(e){var t=e.authLogin,a=e.googleLogin,o=e.addError,c=Object(n.useState)(""),i=Object(q.a)(c,2),l=i[0],u=i[1],m=Object(n.useState)(!1),d=Object(q.a)(m,2),g=d[0],f=d[1],h=Object(n.useState)(""),E=Object(q.a)(h,2),v=E[0],b=E[1],O=Object(n.useState)(!1),y=Object(q.a)(O,2),w=y[0],S=y[1],j=Object(n.useState)(!1),k=Object(q.a)(j,2),N=k[0],x=(k[1],Te()),I=!(l.length>0&&v.length>0);return r.a.createElement("div",{className:x.root},r.a.createElement(z.a,{variant:"h5",align:"center",className:x.title},"Log in!"),r.a.createElement(M.a,null),r.a.createElement("div",{className:x.formContainer},r.a.createElement(ee.a,{className:x.imgPreview},r.a.createElement(Ce.a,{fontSize:"large"})),r.a.createElement("form",{className:x.form},r.a.createElement(te.a,{container:!0,spacing:5},r.a.createElement(te.a,{item:!0,xs:12},r.a.createElement(ne.a,{isSignedIn:!1,onSuccess:function(e){e.profileObj.email.split("@")[0];a(e.accessToken).catch((function(e){!e instanceof Error?Jt.push(s):(o("An error occurred while logging you in with google"),console.log(e))}))},onFailure:function(){},clientId:p,render:function(e){return r.a.createElement(Z.a,{variant:"contained",className:x.googleLogin,onClick:e.onClick,startIcon:r.a.createElement(re.a,{component:se,viewBox:"0 0 533.5 544.3"})},"Login with Google")}})),r.a.createElement(te.a,{item:!0,xs:12},r.a.createElement(K.a,{variant:"outlined",fullWidth:!0,required:!0,id:"username",label:"Username",value:l,placeholder:"jamesbond007",helperText:"Required",onChange:function(e){u(e.target.value),f(0===e.target.value.length)},onBlur:function(e){u(e.target.value),f(0===e.target.value.length)},error:g,autoComplete:"username"})),r.a.createElement(te.a,{item:!0,xs:12},r.a.createElement(K.a,{variant:"outlined",fullWidth:!0,required:!0,id:"password",label:"Password",error:w,value:v,type:"password",helperText:"Required",onChange:function(e){b(e.target.value),S(0===e.target.value.length)},onBlur:function(e){b(e.target.value),S(0===e.target.value.length)},autoComplete:"new-password"})),r.a.createElement(te.a,{item:!0,xs:12},r.a.createElement(Z.a,{fullWidth:!0,variant:"contained",color:"secondary",component:"label",justify:"flex-end",className:x.button,disabled:I,onClick:function(){t(l,v).catch((function(e){!e instanceof Error?Jt.push(s):(o("An error occurred while logging you in"),console.log(e))}))}},"Log in"))))),r.a.createElement(ke.a,{className:x.backdrop,open:N},r.a.createElement(je.a,{className:x.loading},r.a.createElement(z.a,{className:x.loadingTypography},"Loading your data!"),r.a.createElement(Y.a,{color:"inherit"}))))})),Re=a(455),Ae=a(473),Le=a(495),Pe=a(136),Fe=a.n(Pe),De=Object(u.a)((function(e){return{root:{width:"100%",backgroundColor:W.white,alignItems:"left",display:"flex"},chip:{marginRight:15}}})),Ue=function(e){var t=e.joinable,a=e.joined,n=e.owned,o=e.changeValues,c=De();return r.a.createElement("div",{className:c.root},r.a.createElement(Le.a,{className:c.chip,label:"Joinable",onClick:function(){return o(!t,a,n)},color:t?"secondary":"default",icon:t?r.a.createElement(Fe.a,null):""}),r.a.createElement(Le.a,{className:c.chip,label:"Joined",onClick:function(){return o(t,!a,n)},color:a?"secondary":"default",icon:a?r.a.createElement(Fe.a,null):""}),r.a.createElement(Le.a,{className:c.chip,label:"Owned",onClick:function(){return o(t,a,!n)},color:n?"secondary":"default",icon:n?r.a.createElement(Fe.a,null):null}))},Be=a(468),We=a(472),He=a(471),Ge=a(469),qe=a(470),ze=Object(u.a)((function(e){return{root:{maxWidth:300,maxHeight:310,width:"50vw",minWidth:250},media:{height:140},primaryButton:{color:e.palette.primary.dark},secondryButton:{color:e.palette.secondary.dark}}})),Me=function(e){var t=e.event,a=ze(),n=new Date(t.date_time);return r.a.createElement(Be.a,{className:a.root},r.a.createElement(Ge.a,null,r.a.createElement(qe.a,{className:a.media,image:t.picture,title:t.name}),r.a.createElement(He.a,null,r.a.createElement(z.a,{gutterBottom:!0,variant:"h5",component:"h2",noWrap:!0},t.name),r.a.createElement(z.a,{variant:"body2",color:"textSecondary",component:"p",noWrap:!0},"Date: ","".concat(n.getDate(),"/").concat(n.getMonth()+1,"/").concat(n.getFullYear()," ").concat(n.getHours(),":").concat(n.getMinutes())),r.a.createElement(z.a,{variant:"body2",color:"textSecondary",component:"p",noWrap:!0},"Location: ",t.address))),r.a.createElement(We.a,null,r.a.createElement(Z.a,{className:a.primaryButton},"Join"),r.a.createElement(Z.a,{className:a.primaryButton},"Edit"),r.a.createElement(Z.a,{className:a.secondryButton},"Details")))},Je=Object(u.a)((function(e){return{root:{minWidth:"100vw",backgroundColor:W.white,alignItems:"left",flexDirection:"column",display:"flex"},firstLine:{"& > h2":{marginBottom:5},display:"inline",alignItems:"initial",marginTop:13,marginLeft:20},plusButton:{marginLeft:10,color:e.palette.secondary.dark},cardGridItem:{marginTop:3},gridContainer:{width:"90%",marginTop:3,alignItems:"center",flexDirection:"left",display:"flex",marginLeft:10}}})),$e=Object(m.b)((function(e){return{token:e.auth.token,isAuthenticated:void 0!==e.auth.token,search:e.search}}),(function(e){return{addError:function(t){return e(S(t,"error"))}}}))((function(e){var t=e.isAuthenticated,a=e.search,o=e.token;Object(n.useEffect)((function(){t||Jt.push("/login"),null===j&&g.a.get(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return E+"events/?joined=".concat(t,"&joinable=").concat(e,"&owned=").concat(a)}(u,p,b),I("application/json",o)).then((function(e){k(e.data)})).catch((function(e){S("An Error occurred while retrieving events")}))}));var c=Je(),i=Object(n.useState)(!0),l=Object(q.a)(i,2),u=l[0],s=l[1],m=Object(n.useState)(!0),d=Object(q.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)(!1),v=Object(q.a)(h,2),b=v[0],O=v[1],y=Object(n.useState)(null),w=Object(q.a)(y,2),j=w[0],k=w[1],N=j;null!==j&&(N=N.filter((function(e){return e.name.includes(a)})));var x=[];return null!==N&&(x=N.map((function(e){return r.a.createElement(te.a,{key:e.id,item:!0,className:c.cardGridItem},r.a.createElement(Me,{event:e}))}))),console.log(N),r.a.createElement("div",{className:c.root},r.a.createElement("div",{className:c.firstLine},r.a.createElement(z.a,{variant:"h2"},"Events",r.a.createElement(Re.a,{className:c.plusButton,"aria-label":"add"},r.a.createElement(Ae.a,{fontSize:"large"}))),r.a.createElement(Ue,{joined:p,joinable:u,owned:b,changeValues:function(e,t,a){s(e),f(t),O(a),k(null)}})),r.a.createElement(te.a,{container:!0,xs:12,spacing:3,className:c.gridContainer},x))})),Ve=a(129),Ze=a.n(Ve),Ke=a(49),Qe=a(476),Xe=a(477),Ye=a(475),et=a(410),tt=a(474),at=a(459),nt=function(e){var t=e.open,a=e.close,n=e.positions,o=e.selectItem,c=n.map((function(e){var t=C(e),n=t.primary,c=t.secondary;return r.a.createElement(et.a,Object(Ke.a)({key:e.place_id,button:!0,onClick:function(){o(e)}},"onClick",(function(){o(e),a()})),r.a.createElement(tt.a,{primary:n,secondary:c}))}));return r.a.createElement(Ye.a,{open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Qe.a,{id:"alert-dialog-title"},"Which one is it?"),r.a.createElement(Xe.a,null,r.a.createElement(at.a,null,c)))},rt=a(496),ot=a(497),ct=a(478),it=a(498),lt=Object(u.a)((function(e){return{root:{marginBottom:e.spacing(2),width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%"},button:{marginRight:e.spacing(1),marginBottom:e.spacing(1)},map:{width:"200px",height:"200px"},mapBox:{display:"block"}}})),ut=Object(m.b)(null,(function(e){return{addAlert:function(t){return e(S(t,"error"))}}}))((function(e){Object(n.useEffect)((function(){""===u&&navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){s("SRID=4326;POINT (".concat(e.coords.latitude," ").concat(e.coords.longitude,")")),f(e.coords.latitude),b(e.coords.longitude)}))}));var t=Object(n.useState)(""),a=Object(q.a)(t,2),o=a[0],c=a[1],i=Object(n.useState)(""),l=Object(q.a)(i,2),u=l[0],s=l[1],m=Object(n.useState)(44.62943),d=Object(q.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)(10.948296),E=Object(q.a)(h,2),v=E[0],b=E[1],O=lt(),y=Object(n.useState)(!1),w=Object(q.a)(y,2),S=w[0],j=w[1],k=Object(n.useState)(new Date),N=Object(q.a)(k,2),x=N[0],I=(N[1],Object(n.useState)(!1)),T=Object(q.a)(I,2),_=T[0],R=T[1],A=Object(n.useState)([]),L=Object(q.a)(A,2),P=L[0],F=L[1],D=Object(n.useState)(13),U=Object(q.a)(D,2),B=U[0],W=(U[1],function(){g.a.get("https://nominatim.openstreetmap.org/search/?q=".concat(encodeURI(o),"&format=json&limit=3&addressdetails=1&dedupe=1")).then((function(e){F(e.data),R(!0)})).catch((function(t){e.addAlert("An error occurred while retrieving positions")}))}),H=function(){var e=new Date;e-x>1e3?W():(console.log("will"),setTimeout(W,e-x))};return r.a.createElement("div",{className:O.root},r.a.createElement(Ee.a,{variant:"outlined",className:O.form},r.a.createElement(te.a,{container:!0,spacing:2},r.a.createElement(te.a,{item:!0,xs:8,sm:4},r.a.createElement(K.a,{fullWidth:!0,id:"address",label:"Address",placeholder:"via Pietro Vivarelli 10, Modena",value:o,onChange:function(e){var t=e.target.value;t.length>0?j(!1):j(!0),c(t)},onBlur:function(e){""===e.target.value&&j(!0)},onKeyPress:function(e){"Enter"===e.key&&H()},error:S,required:!0,helperText:S?"Required":"",autoComplete:"address-line1"})),r.a.createElement(te.a,{item:!0,xs:4,sm:2},r.a.createElement(Z.a,{variant:"contained",color:"secondary",className:O.button,startIcon:r.a.createElement(Ze.a,null),disabled:!o.length,onClick:H},"Search"))),r.a.createElement(je.a,{className:O.mapBox},r.a.createElement(rt.a,{center:[p,v],zoom:B,className:O.map},r.a.createElement(ot.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r.a.createElement(ct.a,{draggable:!0,onDragend:function(e){console.log(e)},position:{lat:p,lng:v}},r.a.createElement(it.a,{minWidth:90},r.a.createElement("span",null,"ciao")))))),r.a.createElement(nt,{open:_,close:function(){R(!1)},positions:P,selectItem:function(e){var t=C(e),a=t.primary,n=t.secondary;c("".concat(a," ").concat(n)),s("SRID=4326;POINT (".concat(e.lat," ").concat(e.lon,")")),f(parseInt(e.lat)),b(parseInt(e.lon))}}))})),st=(Object(l.a)(),function(e){return r.a.createElement("div",null,r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/login"},r.a.createElement(G,null,r.a.createElement(_e,null))),r.a.createElement(i.a,{exact:!0,path:"/signup"},r.a.createElement(G,null,r.a.createElement(xe,null))),r.a.createElement(i.a,{exact:!0,path:"/home",component:$e}),r.a.createElement(i.a,{path:"*",component:ut})))}),mt=a(411),dt=a(242),gt=a.n(dt),pt=Object(u.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function ft(e){var t=pt(),a=r.a.useState(!0),n=Object(q.a)(a,2),o=n[0],c=n[1],i=e.alert;return r.a.createElement("div",{className:t.root},r.a.createElement(mt.a,{in:o},r.a.createElement(me.a,{severity:i.style,action:r.a.createElement(Re.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){c(!1)}},r.a.createElement(gt.a,{fontSize:"inherit"}))},i.text)))}function ht(e){var t=e.alerts.map((function(e){return r.a.createElement(ft,{key:e.id,alert:e})}));return r.a.createElement("div",{className:"alert-container"},t)}var Et=a(482),vt=a(483),bt=a(12),Ot=a(245),yt=a.n(Ot),wt=a(255),St=a(481),jt=a(250),kt=a(172),Nt=a.n(kt),xt=a(171),It=a.n(xt),Ct=a(246),Tt=a.n(Ct),_t=a(249),Rt=a(488),At=Object(_t.a)({palette:{primary:{light:"#52c7b8",main:"#009688",dark:"#00675b",contrastText:"#000"},secondary:{light:"#ffc246",main:"#ff9100",dark:"#c56200",contrastText:"#000"},background:{paper:"#f0f0f0"}}}),Lt=At=Object(Rt.a)(At),Pt=a(489),Ft=a(479),Dt=a(243),Ut=a.n(Dt),Bt=Object(u.a)((function(e){return{root:{width:"100%",maxWidth:"36ch",backgroundColor:e.palette.background.paper},inline:{display:"inline"}}}));function Wt(e){var t=e.notification,a=e.history;Bt();return r.a.createElement(r.a.Fragment,null,r.a.createElement(et.a,{alignItems:"flex-start",disabled:t.read,component:"a",href:"#",onClick:a.push(t.url)},r.a.createElement(Ft.a,null,r.a.createElement(Ut.a,null)),r.a.createElement(tt.a,{primary:t.title,secondary:t.content})),r.a.createElement(M.a,{variant:"inset",component:"li"}))}var Ht=a(244),Gt=a.n(Ht),qt=yt()((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(Ke.a)({backgroundColor:"transparent",border:"none",cursor:"pointer",color:"inherit",textDecoration:"inherit",display:"none",outline:0,marginLeft:10},e.breakpoints.up("sm"),{display:"block"}),search:Object(Ke.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(bt.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(bt.c)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:5,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(Ke.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),sectionDesktop:Object(Ke.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(Ke.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),logo:{backgroundColor:"transparent",border:"none",cursor:"pointer",maxHeight:"60px",outline:0},list:{width:250},fullList:{width:"auto"},drawerTitle:{margin:10},logout:{marginLeft:20}}}));var zt=Object(m.b)((function(e){return{isAuthenticated:void 0!==e.auth.token,notificationsNumber:e.notifications.notifications.filter((function(e){return e.read})).length,notifications:e.notifications.notifications,search:e.search}}),(function(e){return{authLogout:function(){return e(D())},setSearch:function(t){return e(function(e){return function(t){return t({type:"SET_SEARCH",search:e})}}(t))}}}))((function(e){var t=e.isAuthenticated,a=e.notifications,n=e.notificationsNumber,o=e.authLogout,c=e.setSearch,i=(e.search,qt()),l=r.a.useState(null),u=Object(q.a)(l,2),m=u[0],d=u[1],g=r.a.useState(!1),p=Object(q.a)(g,2),f=p[0],h=p[1],E=function(e){return function(t){("keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&h(e)}},v=Boolean(m),b=function(){d(null)},O=r.a.createElement(Z.a,{color:"inherit",className:i.logout,onClick:function(){b(),o()}}," Logout"),y=r.a.createElement(jt.a,{anchorEl:m,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu-mobile",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:v,onClose:b},r.a.createElement(he.a,{onClick:function(e){E(!0)(e),b()}},r.a.createElement(Re.a,{"aria-label":"show ".concat(n," new notifications"),color:"inherit"},r.a.createElement(St.a,{badgeContent:n,color:"secondary"},r.a.createElement(It.a,null))),r.a.createElement("p",null,"Notifications")),r.a.createElement(he.a,null,r.a.createElement(Re.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit"},r.a.createElement(Nt.a,null)),r.a.createElement("p",null,"Profile")),r.a.createElement(he.a,null,O)),w=a.map((function(e){return r.a.createElement(Wt,{key:e.id,notification:e})})),S=r.a.createElement(Pt.a,{anchor:"right",open:f,onClose:E(!1)},r.a.createElement("div",{className:i.list,role:"presentation",onClick:E(!1),onKeyDown:E(!1)},r.a.createElement(M.a,null),r.a.createElement(z.a,{className:i.drawerTitle,variant:"h6"},"Notifications:"),r.a.createElement(M.a,null),r.a.createElement(at.a,null,w)));return r.a.createElement("div",{className:i.grow},r.a.createElement(Et.a,{position:"static"},r.a.createElement(vt.a,null,r.a.createElement("button",{className:i.logo,href:"#",onClick:function(){t?Jt.push(s):Jt.push("/")}},r.a.createElement("img",{src:Gt.a,alt:"logo",className:i.logo})),r.a.createElement(z.a,{className:i.title,variant:"h6",noWrap:!0,component:"button",href:"#",onClick:function(){Jt.push(s)}},"DM Project"),t?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:i.search},r.a.createElement("div",{className:i.searchIcon},r.a.createElement(Ze.a,null)),r.a.createElement(wt.a,{placeholder:"Search\u2026",classes:{root:i.inputRoot,input:i.inputInput},inputProps:{"aria-label":"search"},onChange:function(e){console.log(e.target.value),c(e.target.value)}})),r.a.createElement("div",{className:i.grow}),r.a.createElement("div",{className:i.sectionDesktop},r.a.createElement(Re.a,{"aria-label":"show ".concat(n," new notifications"),color:"inherit",onClick:E(!0)},r.a.createElement(St.a,{badgeContent:n,color:"secondary"},r.a.createElement(It.a,null))),r.a.createElement(Re.a,{edge:"end","aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",onClick:function(){},color:"inherit"},r.a.createElement(Nt.a,null)),O),r.a.createElement("div",{className:i.sectionMobile},r.a.createElement(Re.a,{"aria-label":"show more","aria-controls":"primary-search-account-menu-mobile","aria-haspopup":"true",onClick:function(e){d(e.currentTarget)},color:"inherit"},r.a.createElement(Tt.a,null)))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:i.grow}),r.a.createElement(Z.a,{variant:"contained",color:"secondary",disableElevation:!0,onClick:function(){Jt.push("/signup")}},"Signup"),r.a.createElement(Z.a,{color:"inherit",disableElevation:!0,onClick:function(){Jt.push("/login")}},"Login")))),y,S)})),Mt=a(480),Jt=Object(l.a)();var $t=Object(m.b)((function(e){return{username:e.profile.user.username,alerts:e.alerts}}),(function(e){return{onTryAutoSignup:function(){return e((function(e){var t=localStorage.getItem("access_token");if(void 0!==t||null!==t){var a=new Date(localStorage.getItem("expiration_date"));if(!(a<=new Date))return e(R(t)),e(_()).catch((function(t){return console.log(t),e(D())})),e(A((a.getTime()-(new Date).getTime())/1e3)),e(T()).catch((function(t){return console.log(t),e(D())}));e(D())}}))}}}))((function(e){return Object(n.useEffect)((function(){e.onTryAutoSignup()})),r.a.createElement(i.b,{history:Jt},r.a.createElement(Mt.a,{theme:Lt},r.a.createElement(zt,null),r.a.createElement(ht,{alerts:e.alerts}),r.a.createElement(st,null)))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Vt=a(62),Zt=a(247),Kt={token:void 0,loading:!1},Qt=function(e,t){return x(e,{loading:!0})},Xt=function(e,t){return x(e,{token:t.token,loading:!1})},Yt=function(e,t){return x(e,{loading:!1})},ea=function(e,t){return x(e,{token:void 0})},ta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return Qt(e);case"AUTH_SUCCESS":return Xt(e,t);case"AUTH_ERROR":return Yt(e);case"AUTH_LOGOUT":return ea(e);default:return e}},aa=a(251),na=a(248),ra=a.n(na),oa=[],ca=function(e,t){return window.scrollTo(0,0),[].concat(Object(aa.a)(e),[{text:t.text,style:t.style,id:ra()()}])},ia=function(e,t){return e.filter((function(e){return e.id!==t.id}))},la=function(e,t){return oa},ua=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ALERT":return ca(e,t);case"REMOVE_ALERT":return ia(e,t);case"REMOVE_ALL_ALERTS":return la();default:return e}},sa={id:"",picture:"",score:0,carSet:[],averageVote:0,receivedFeedback:[],givenFeedback:[],user:{},loading:!1},ma=function(e,t){return x(e,{loading:!0})},da=function(e,t){var a=t.id,n=t.picture,r=t.score,o=t.carSet,c=t.averageVote,i=t.receivedFeedback,l=t.givenFeedback,u=t.user;return x(e,{loading:!1,id:a,picture:n,score:r,carSet:o,averageVote:c,receivedFeedback:i,givenFeedback:l,user:u})},ga=function(e,t){return x(e,{loading:!1,picture:t.picture})},pa=function(e,t){return x(e,{loading:!1})},fa=function(e,t){var a=t.id,n=t.firstName,r=t.lastName,o=t.email,c=e.user;return c.id=a,c.firstName=n,c.lastName=r,c.email=o,x(e,{loading:!1,user:c})},ha=function(e,t){return sa},Ea=function(e,t){var a=t.id,n=t.name,r=t.totSeats,o=t.fuel,c=t.consumption;return e.carSet.push({id:a,name:n,totSeats:r,fuel:o,consumption:c}),e.loading=!1,e},va=function(e,t){var a=t.id,n=t.name,r=t.totSeats,o=t.fuel,c=(t.consumption,e.carSet.findIndex((function(e){return e.id===a})));return e.carSet[c].name=n,e.carSet[c].totSeats=r,e.carSet[c].fuel=o,e.carSet[c].consumption=o,e.loading=!1,e},ba=function(e,t){var a=e.carSet.filter((function(e){return e.id!==t}));return x(e,{carSet:a,loading:!1})},Oa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PROFILE_OP_START":return ma(e);case"GET_PROFILE_SUCCESS":return da(e,t);case"PROFILE_PICTURE_UPDATE":return ga(e,t);case"PROFILE_OP_ERROR":return pa(e);case"USER_DATA_UPDATE":return fa(e,t);case"CLEAR_PROFILE_DATA":return ha();case"CAR_CREATE":return Ea(e,t);case"CAR_UPDATE":return va(e,t);case"CAR_DELETE":return ba(e,t);default:return e}},ya={loading:!1,notifications:[]},wa=function(e,t){return x(e,{loading:!0})},Sa=function(e,t){return x(e,{loading:!1})},ja=function(e,t){return x(e,{notifications:t.notifications})},ka=function(e,t){var a=t.id,n=(t.read,e.notifications.findIndex((function(e){return e.id===a})));return e.notifications[n].read=t,e},Na=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ya,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTIFICATIONS_START":return wa(e);case"NOTIFICATIONS_ERROR":return Sa(e);case"GET_NOTIFICATIONS_SUCCESS":return ja(e,t);case"NOTIFICATION_UPDATE":return ka(e,t);case"CLEAR_NOTIFICATIONS":return ya;default:return e}},xa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SEARCH":return t.search;default:return e}},Ia=Object(Vt.c)({auth:ta,alerts:ua,profile:Oa,notifications:Na,search:xa}),Ca=[Zt.a],Ta=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Vt.d,_a=Object(Vt.e)(Ia,{},Ta(Vt.a.apply(void 0,Ca)));c.a.render(r.a.createElement(m.a,{store:_a},r.a.createElement($t,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[273,1,2]]]);
//# sourceMappingURL=main.8060c67b.chunk.js.map